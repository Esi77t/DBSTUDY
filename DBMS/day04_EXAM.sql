CREATE DATABASE PRACTICE_20250326;

USE PRACTICE_20250326;

CREATE TABLE CUSTOMERS(
	CUSTOMER_ID INT PRIMARY KEY,
    CUSTOMER_NAME VARCHAR(255),
    CITY VARCHAR(255)
);

INSERT INTO CUSTOMERS
VALUES(1, '홍길동', '서울');
INSERT INTO CUSTOMERS
VALUES(2, '김철수', '부산');
INSERT INTO CUSTOMERS
VALUES(3, '이영희', '대전');
INSERT INTO CUSTOMERS
VALUES(4, '박지성', '인천');
INSERT INTO CUSTOMERS
VALUES(5, '손흥민', '제주');

CREATE TABLE ORDERS(
	ORDER_ID INT PRIMARY KEY,
    CUSTOMER_ID INT,
	ORDER_DATE DATE,
    ORDER_AMOUNT INT,
    FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(CUSTOMER_ID) ON UPDATE CASCADE
);

INSERT INTO ORDERS
VALUES(101, 1, '2023-01-10', 100);
INSERT INTO ORDERS
VALUES(102, 1, '2023-02-15', 150);
INSERT INTO ORDERS
VALUES(103, 2, '2023-03-20', 200);
INSERT INTO ORDERS
VALUES(104, 3, '2023-04-25', 120);
INSERT INTO ORDERS
VALUES(105, 5, '2023-05-30', 180);

CREATE TABLE PRODUCTS(
	PRODUCT_ID INT PRIMARY KEY,
    PRODUCT_NAME VARCHAR(255),
    PRICE INT
);

INSERT INTO PRODUCTS
VALUES(201, '노트북', 800);
INSERT INTO PRODUCTS
VALUES(202, '스마트폰', 500);
INSERT INTO PRODUCTS
VALUES(203, '태블릿', 300);
INSERT INTO PRODUCTS
VALUES(204, '모니터', 250);
INSERT INTO PRODUCTS
VALUES(205, '키보드', 50);

CREATE TABLE ORDER_PRODUCTS(
	ORDER_ID INT,
    PRODUCT_ID INT,
    QUANTITY INT,
    FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ORDER_ID) ON UPDATE CASCADE,
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCTS(PRODUCT_ID) ON UPDATE CASCADE
);

INSERT INTO ORDER_PRODUCTS
VALUES(101, 201, 1);
INSERT INTO ORDER_PRODUCTS
VALUES(101, 205, 2);
INSERT INTO ORDER_PRODUCTS
VALUES(102, 202, 1);
INSERT INTO ORDER_PRODUCTS
VALUES(103, 203, 3);
INSERT INTO ORDER_PRODUCTS
VALUES(104, 204, 1);
INSERT INTO ORDER_PRODUCTS
VALUES(105, 201, 1);

SELECT * FROM CUSTOMERS;
SELECT * FROM ORDERS;
SELECT * FROM PRODUCTS;
SELECT * FROM ORDER_PRODUCTS;


SELECT CUSTOMER_NAME "고객 이름", ORDER_DATE "주문 날짜", ORDER_AMOUNT "주문 금액"
FROM CUSTOMERS C
INNER JOIN ORDERS O
ON C.CUSTOMER_ID = O.CUSTOMER_ID;

SELECT CUSTOMER_NAME "고객 이름", ORDER_DATE "주문 날짜", ORDER_AMOUNT "주문 금액"
FROM CUSTOMERS C
LEFT JOIN ORDERS O
ON C.CUSTOMER_ID = O.CUSTOMER_ID;

SELECT PRODUCT_NAME, QUANTITY, (PRICE * QUANTITY) "total amounts"
FROM PRODUCTS P
INNER JOIN ORDER_PRODUCTS O 
ON P.PRODUCT_ID = O.PRODUCT_ID;

