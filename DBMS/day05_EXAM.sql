create database practice02;
use practice02;
CREATE TABLE Customers (
    customer_id INT PRIMARY KEY,
    customer_name VARCHAR(255),
    city VARCHAR(255)
);
INSERT INTO Customers (customer_id, customer_name, city) VALUES
(1, '홍길동', '서울'),
(2, '김철수', '부산'),
(3, '이영희', '대전'),
(4, '박지성', '인천'),
(5, '손흥민', '제주');
CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    order_date DATE,
    order_amount INT,
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
INSERT INTO Orders (order_id, customer_id, order_date, order_amount) VALUES
(101, 1, '2023-01-10', 100),
(102, 1, '2023-02-15', 150),
(103, 2, '2023-03-20', 200),
(104, 3, '2023-04-25', 120),
(105, 5, '2023-05-30', 180);
CREATE TABLE Products (
    product_id INT PRIMARY KEY,
    product_name VARCHAR(255),
    price INT
);
INSERT INTO Products (product_id, product_name, price) VALUES
(201, '노트북', 800),
(202, '스마트폰', 500),
(203, '태블릿', 300),
(204, '모니터', 250),
(205, '키보드', 50);
CREATE TABLE Order_Products (
    order_id INT,
    product_id INT,
    quantity INT,
    PRIMARY KEY (order_id, product_id),
    FOREIGN KEY (order_id) REFERENCES Orders(order_id),
    FOREIGN KEY (product_id) REFERENCES Products(product_id)
);
INSERT INTO Order_Products (order_id, product_id, quantity) VALUES
(101, 201, 1),
(101, 205, 2),
(102, 202, 1),
(103, 203, 3),
(104, 204, 1),
(105, 201, 1);

# 문제 풀기
ALTER TABLE CUSTOMERS
ADD EMAIL VARCHAR(255),
ADD	POST_NUMBER INT;

ALTER TABLE CUSTOMERS
DROP POST_NUMBER;

ALTER TABLE PRODUCTS
MODIFY COLUMN PRICE BIGINT;

INSERT INTO CUSTOMERS(CUSTOMER_ID, CUSTOMER_NAME, CITY)
VALUES(6, '김민수', '광주');

SELECT * FROM CUSTOMERS
WHERE CITY = '서울';

UPDATE CUSTOMERS
SET CITY = '부산'
WHERE CUSTOMER_ID = 3;

DELETE FROM CUSTOMERS
WHERE CUSTOMER_ID = 6;

INSERT INTO ORDERS(ORDER_ID, CUSTOMER_ID, ORDER_DATE, ORDER_AMOUNT)
VALUES(106, 4, '2025-03-28', 250);

SELECT * FROM ORDERS;

SELECT * FROM ORDERS
WHERE CUSTOMER_ID = 1;

UPDATE ORDERS
SET ORDER_AMOUNT = 180
WHERE ORDER_ID = 102;

DELETE FROM ORDERS
WHERE ORDER_ID = 105;

DELETE FROM ORDER_PRODUCTS
WHERE ORDER_ID = 105;

INSERT INTO PRODUCTS
VALUES(206, '마우스', 30);

SELECT * FROM PRODUCTS;

SELECT PRODUCT_NAME, PRODUCT_ID
FROM PRODUCTS
WHERE PRICE >= 300;

UPDATE PRODUCTS
SET PRICE = 350
WHERE PRODUCT_ID = 203;

DELETE FROM ORDER_PRODUCTS
WHERE PRODUCT_ID = 205;

DELETE FROM PRODUCTS
WHERE PRODUCT_ID = 205;

INSERT INTO ORDER_PRODUCTS
VALUES(106, 204, 2);

SELECT * FROM ORDER_PRODUCTS;

SELECT * FROM ORDER_PRODUCTS
WHERE ORDER_ID = 101;

UPDATE ORDER_PRODUCTS
SET QUANTITY = 4
WHERE ORDER_ID = 103 AND PRODUCT_ID = 203;

DELETE FROM ORDER_PRODUCTS
WHERE ORDER_ID = 104 AND PRODUCT_ID = 204;

SELECT ORDER_ID, ORDER_AMOUNT,
CASE WHEN ORDER_AMOUNT >= 200 THEN 'VIP'
	 WHEN ORDER_AMOUNT >= 100 THEN 'GOLD'
     ELSE 'SILVER'
END AS ORDER_GRADE
FROM ORDERS;

SELECT ORDER_ID, ORDER_AMOUNT,
	   IF(ORDER_AMOUNT >= 150, "YES", "NO") AS IS_HIGH_AMOUNT
FROM ORDERS;

SELECT CUSTOMER_NAME, IFNULL(EMAIL, '이메일 없음') AS CUSTOMER_EMAIL
FROM CUSTOMERS;

SELECT CUSTOMER_NAME, NULLIF(CITY, '서울') AS NON_SEOUL_CITY
FROM CUSTOMERS;

SELECT CUSTOMER_NAME, CITY
FROM CUSTOMERS
WHERE CUSTOMER_NAME LIKE '김%';

SELECT PRODUCT_NAME, PRICE
FROM PRODUCTS
WHERE PRODUCT_NAME LIKE '%폰';

SELECT CUSTOMER_NAME, CITY
FROM CUSTOMERS
WHERE CITY LIKE '__';

SELECT CUSTOMER_NAME, CITY
FROM CUSTOMERS
WHERE CUSTOMER_NAME REGEXP '^(홍|박|김)';

SELECT CUSTOMER_NAME, CITY
FROM CUSTOMERS
WHERE CITY REGEXP '(서울|부산)$';

SELECT ORDER_ID, ORDER_DATE
FROM ORDERS
WHERE ORDER_DATE BETWEEN '2023-03-01' AND '2023-03-31';

SELECT ORDER_ID, CUSTOMER_ID
FROM ORDERS
WHERE ORDER_DATE = DATE(NOW());

SELECT ORDER_ID, DATE_ADD(ORDER_DATE, INTERVAL 7 DAY)
FROM ORDERS;








SELECT * FROM CUSTOMERS;
SELECT * FROM PRODUCTS;
SELECT * FROM ORDERS;
SELECT * FROM ORDER_PRODUCTS;